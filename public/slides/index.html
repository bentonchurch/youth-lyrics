<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Meta data -->
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <meta meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
  <!-- Title -->
  <title>Slides</title>

  <!-- Styles -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" />
  <link rel="preload" href="./font/Neris-Light.woff2" as="font" crossorigin />
  <link rel="preload" href="./font/Neris-SemiBold.woff2" as="font" crossorigin />
  <link rel="stylesheet" href="./font/neris-font.css" />
</head>

<body class="overflow-hidden"></body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
<script type="module" src="./main.js?i=10"></script>
<script>
  try{const bc = new BroadcastChannel('canvas-channel');

// Function to broadcast canvas
function broadcastCanvas(canvas) {
    function sendFrame() {
        createImageBitmap(canvas).then(bitmap => {
            bc.postMessage(bitmap, [bitmap]);
        });
        requestAnimationFrame(sendFrame);
    }
    sendFrame();
}

// Detect dynamically added canvas
const observer = new MutationObserver((mutations) => {
    for (let m of mutations) {
        for (let node of m.addedNodes) {
            if (node.tagName === 'CANVAS') broadcastCanvas(node);
            else if (node.querySelectorAll) {
                node.querySelectorAll('canvas').forEach(c => broadcastCanvas(c));
            }
        }
    }
});
observer.observe(document.body, { childList: true, subtree: true });

// If canvas already exists
document.querySelectorAll('canvas').forEach(c => broadcastCanvas(c));}
catch(err){console.log('error: '+err)}</script>
</html>